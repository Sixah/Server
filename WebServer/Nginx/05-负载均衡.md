## 一 负载均衡

由于流量很大，往往同一个服务由多台服务器负载执行，那么如何避免某个服务器一直在处理请求，过于繁忙，而造成其余服务器闲置，以达到各个服务器负载均衡呢？  

配置如下：
```
# 配置负载名
upstream imgserver {
    192.168.1.200:81 weight=1 max_fails=2 fail_timeout=3;
    192.168.1.200:82 weight=1 max_fails=2 fail_timeout=3;
}

# 第一台图片负载服务器
server {
    listen 81;
    server_name localhost;
    root html;
}

# 第二台图片负载服务器
server {
    listen 82;
    server_name localhost;
    root html;
}

# 配置负载数据
server {
    listen 80;
    server_name localhost;
    root html;
    .....
    location ~* \.(jpg|jpeg|git|png){
        proxy_pass http://imageserver;
    }
}
```