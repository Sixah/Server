## 一 数据库简介

数据库系统解决的问题：持久化存储，优化读写，保证数据的有效性。  

当前使用的数据库，主要分为两类：
- 文档型：如sqlite，就是一个文件，通过对文件的复制完成数据库的复制；
- 服务型：如mysql，数据存储在物理文件中，使用终端以tcp/ip协议进行数据操作。

E-R模型：当前物理的数据库都是按照E-R模型进行设计的，E表示entry实体，R表示relationship，一个实体转换为数据库中的一个表，关系描述两个实体之间的对应规则，包括
- 一对一
- 一对多
- 多对多
关系转换为数据库表中的一个列；在关系型数据库中一行就是一个对象。  

ER关系图：
![](/images/sql/00-er.png)

三范式：设计数据库的一些规范被称为范式，后一个范式，都是在前一个范式的基础上建立的。
- 第一范式（1NF)：列不可拆分
- 第二范式（2NF)：唯一标识
- 第三范式（3NF)：引用主键

一个数据库就是一个完整的业务单元，可以包含多张表，数据被存储在表中。在表中为了更加准确的存储数据，保证数据的正确有效，可以在创建表的时候，为表添加一些强制性的验证，包括数据字段的类型、约束。

## 二 SQL与NoSQL

关系型数据库是建立在关系模型基础上的数据库。  
关系模型是由关系数据结构、关系操作集合（增删改查、join的等）、关系完整的约束性（实体完整性、参照完整性、用工定义完整性）。  
标准数据查询语言SQL就是一种基于关系数据库的语言。  

关系型数据库面临的问题：
- 1-海量数据存储和访问：如何高效率的存储和访问海量数据
- 2-高并发高负载下，优化数据库的成本很高

NoSQL，全名为Not Only SQL，指的是非关系型的数据库。随着访问量的上升，网站的数据库性能出现了问题，于是nosql被设计出来。
非结构型数据库没有行、列的概念，用JSON来存储数据。集合就相当于“表”，文档就相当于“行”。有些系统，特别需要筛选，如筛选所有大约20岁的女生，那么mysql擅长，但是站内信只需要存储就好了，不需要筛选。
关系型数据库采用的结构化的数据，NoSQL采用的是键值对的方式存储数据。  

## 三 常见数据库

#### 3.1 常见关系型数据库

#### 3.2 常见非关系型数据库

| 类型 | 常见数据库名 | 特点 |
| ------ | ------ | ------ |
| 列存储 | Hbase Cassandra | 按列存储数据的，方便存储结构化和半结构化数据，方便做数据压缩，对针对某一列或者某几列的查询有非常大的IO优势 |
| 文档存储 | MongoDB CouchDB | 按列存储数据的，方便存储结构化和半结构化数据，方便做数据压缩，对针对某一列或者某几列的查询有非常大的IO优势 |
| k-v存储 | MemcacheDB Redis | 可以通过key快速查询到其value。一般来说，存储不管value的格式，照单全收。（Redis包含了其他功能） |
| 图存储 | Neo4J FlockDB | 图形关系的最佳存储。使用传统关系数据库来解决的话性能低下，而且设计使用不方便。 |
| 对象存储 | db4o Versant | 文通过类似面向对象语言的语法操作数据库，通过对象的方式存取数据。 |
| xml数据库 | BerkeleyDBXML BaseX | 高效的存储XML数据，并支持XML的内部查询语法，比如XQuery,Xpath。 |


## 四 NoSQL特点

优点:
- 高可扩展性
- 分布式计算
- 低成本
- 架构的灵活性，半结构化数据
- 没有复杂的关系

缺点:
- 没有标准化
- 有限的查询功能（到目前为止）
- 最终一致是不直观的程序


## 五 NoSQL使用场景

在处理非结构化/半结构化的大数据时；在水平方向上进行扩展时；随时应对动态增加的数据项时可以优先考虑使用NoSQL数据库。  

在考虑数据库的成熟度；支持；分析和商业智能；管理及专业性等问题时，应优先考虑关系型数据库。  

总结NoSQL的使用场景：
- 1、数据模型比较简单；
- 2、需要灵活性更强的IT系统；
- 3、对数据库性能要求较高；
- 4、不需要高度的数据一致性；
- 5、对于给定key，比较容易映射复杂值的环境。


