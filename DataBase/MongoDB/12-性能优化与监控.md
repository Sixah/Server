## 一 性能优化原则
- 1 在开始设计系统时候就必须考虑性能问题，因为系统开发上线后出现性能问题再补救的代价很大。
- 2 必须优化问题的根源
- 3 被优化的系统与多个系统进行了关联，需要考虑优化后的影响
- 4 当有很多参数影响性能时，可以一次更改一个参数，这样比较容易判断哪个参数对系统的性能影响。  
- 5 需要检查是否是硬件问题造成的性能下降
- 6 开始又花钱，必须考虑如果优化没有达到效果，反而出现更大问题，需要对优化操作进行回退。
## 二 常见mongo的sql优化方案
- 创建索引:如果写入较多，尽量不要添加索引
- 限定返回数:limit()
- 只查询使用到的字段
- 使用capped集合:比普通集合读写效率高，但是大小固定，只能插入不能删除（只能删除整个文档）
## 三 性能监控工具
```
# mongostat命令可以查看Mongo实例的统计信息：
mongostat -u 'admin' -p '123' --authenticationDatabase 'admin'

# 查看实例运行状态
db.serverStatus()

# 查看数据库的状态信息
db.stats()
```