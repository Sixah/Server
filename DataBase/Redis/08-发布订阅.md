## 一 发布订阅简介

一般来说，发布与订阅（pub/sub）的特点是：订阅者（listener）负责订阅频道（channel），发布者（publisher）负责向频道发送二进制字符串消息。每当有消息被发送至频道时，频道的所有订阅者都会受到消息。  

相关命令：
```
SUBSCRIBE channel [channel...]                      # 订阅指定的一个或者多个频道
UNSUBSCRIBE [channel [channel...]]                  # 退订指定的一个或者多个频道，如果执行时没有给予指定的频道，则退订所有频道
PUBLISH channel msg                                 # 向指定频道发送消息
PSUBSCRIBE pattern [pattern...]                     # 订阅指定模式匹配的所有频道
PUNSUBSCRIBE [pattern [pattern...]]                 # 退订指定模式，如果没有给定模式，那么退订所有模式
```

Redis基于SUBSCRIBE 和PUBLISH 命令的发布订阅并不好：
- 稳定性不足：如果订阅者读取速度不够快，会造成消息的积压，最终导致Redis变慢，甚至影响系统整体稳定性，新版redis不会出现该问题，因为会自动断开不符合配置：`client-output-buffer-limit pubsub`的订阅客户端。
- 可靠性不足：因为网络的传输并不可靠，因为断线产生的错误会使网络连接的两端中的其中一端进行重新连接。虽然客户端可以断线重连，但是如果客户端在执行订阅操作的过程中断线，那么客户端会丢失在断线期间发送的所有消息。